var blogStoryManager={publishIcon:"fa-eye",publishTitle:"Publish",publishText:"Published",publishClass:"status-publish",unpublishIcon:"fa-eye-slash",unpublishTitle:"Unpublish",unpublishText:"Draft",unpublishClass:"status-draft",initialize:function(){var t=function(t,a,s){var l=blogStoryManager.publishIcon,r=blogStoryManager.unpublishIcon,o=blogStoryManager.publishClass,e=blogStoryManager.unpublishClass;a?(t.attr("title",blogStoryManager.unpublishTitle),t.attr("status",blogStoryManager.publishText),t.find("i").removeClass(l).addClass(r),s&&(s.html(blogStoryManager.publishText),s.addClass(o).removeClass(e))):(t.attr("title",blogStoryManager.publishTitle),t.attr("status",blogStoryManager.unpublishText),t.find("i").removeClass(r).addClass(l),s&&(s.html(blogStoryManager.unpublishText),s.addClass(e).removeClass(o)))},a=$(".publish-story");a.each(function(a){var s=t,l=$(this),r=l.parents(".item-row").find(".item-col-stats .val"),o=l.attr("status")===blogStoryManager.publishText,e=l.attr("storyId");t(l,o),l.click(function(){o=l.attr("status")===blogStoryManager.publishText,$.ajax({type:"PATCH",url:"/author/stories/"+e+"?isPublished="+!o,contentType:"application/json",success:function(t){s(l,!o,r)},error:function(t){alert(t)}})})}),$("#confirm-modal").on("show.bs.modal",function(t){var a=$(t.relatedTarget),s=a.data("story"),l=$(this);l.find(".btn-primary").click(function(){blogStoryManager.removeStory(s)})})},removeStory:function(t){$.ajax({type:"DELETE",url:"/author/stories/"+t,success:function(t){location.reload()},error:function(t){alert(t)}})}};