var blogStoryManager={publishIcon:"fa-eye",publishTitle:"Publish",publishText:"Published",publishClass:"status-publish",unpublishIcon:"fa-eye-slash",unpublishTitle:"Unpublish",unpublishText:"Draft",unpublishClass:"status-draft",initialize:function(){var e=function(t,a,s){var l=blogStoryManager.publishIcon,r=blogStoryManager.unpublishIcon,o=blogStoryManager.publishClass,e=blogStoryManager.unpublishClass;a?(t.attr("title",blogStoryManager.unpublishTitle),t.attr("status",blogStoryManager.publishText),t.find("i").removeClass(l).addClass(r),s&&(s.html(blogStoryManager.publishText),s.addClass(o).removeClass(e))):(t.attr("title",blogStoryManager.publishTitle),t.attr("status",blogStoryManager.unpublishText),t.find("i").removeClass(r).addClass(l),s&&(s.html(blogStoryManager.unpublishText),s.addClass(e).removeClass(o)))};$(".publish-story").each(function(t){var a=e,s=$(this),l=s.parents(".item-row").find(".item-col-stats .val"),r=s.attr("status")===blogStoryManager.publishText,o=s.attr("storyId");e(s,r),s.click(function(){r=s.attr("status")===blogStoryManager.publishText,$.ajax({type:"PATCH",url:"/author/stories/"+o+"?isPublished="+!r,contentType:"application/json",success:function(t){a(s,!r,l)},error:function(t){alert(t)}})})}),$("#confirm-modal").on("show.bs.modal",function(t){var a=$(t.relatedTarget).data("story");$(this).find(".btn-primary").click(function(){blogStoryManager.removeStory(a)})})},removeStory:function(t){$.ajax({type:"DELETE",url:"/author/stories/"+t,success:function(t){location.reload()},error:function(t){alert(t)}})}};